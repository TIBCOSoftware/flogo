sudo: false

language: go

go:
  - master

os:
  - linux

branches:
  only:
  - master

install:
  - wget -O hugo.tar.gz https://github.com/gohugoio/hugo/releases/download/v0.38.1/hugo_0.38.1_Linux-64bit.tar.gz
  - tar -xzvf hugo.tar.gz
  - mv hugo $HOME/gopath/bin
  - rm hugo.tar.gz && rm LICENSE.md && rm README.md

script:
  - chmod +x build-docs.sh
  - ./build-docs.sh

deploy:
  provider: pages
  skip_cleanup: true
  local-dir: docs/public
  github_token: $GITHUB_TOKEN
  email: $EMAIL
  on:
    branch: master
